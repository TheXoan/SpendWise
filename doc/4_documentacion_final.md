# ENTREGA FINAL

> *TODO*: Documenta de xeito detallado os resultados desenvolvidos no teu proxecto, incluindo os cambios en relaci√≥n ao anteproxecto. 

> *TODO*: Incl√∫e, en forma de documentaci√≥n, un Manual t√©cnico e un Manual de usuario espec√≠ficos para o teu proxecto. 

> #NOTA JUAN: PENDENTE CAMBIAR O DOCUMENTO A PRESENTE E ENGADIR NOVAS FUNCIONALIDADES

# ANTEPROXECTO SPENDWISE

_Juan V√°zquez Bueno_

# Descrici√≥n do proxecto

O proxecto consiste nunha aplicaci√≥n m√≥bil que permita √°s persoas
poder visualizar os seus gastos e ingresos dunha forma real e
estruturada. Poden ver a suma dos "gastos formiga" e que poden
aforrar dunha forma m√°is f√°cil.

1.  Xustificaci√≥n do proxecto

A idea do proxecto xurdiume despois de ver como persoas que co√±ezo anotaban os seus gastos, por exemplo, do supermercado, cando iban a tomar algo e gastaban cartos en ocio, fac√≠an un Bizum, ou mesmo apartaban cartos para outra conta de aforro, e anotaban todo esto nun papel, ou mesmo nas notas do m√≥bil, para despois a fin de mes poder sumar todo e ver canto destinaran a cada cousa.

Vendo todo esto xurdiume a idea de crear unha aplicaci√≥n que solucionara todas estas necesidades que lle xurd√≠an √°s persoas. Poder anotar gastos, asignalos a categor√≠as, anotar subscrici√≥ns ou pagos recurrentes etc.

2.  Estudo de necesidades

Con respecto a aplicaci√≥n m√°is utilizada para este fin ser√≠a a propia aplicaci√≥n do banco, a cal na maior√≠a dos casos xa nos fai unha pequena separaci√≥n de gastos por categor√≠as e uns resumos mensuais. Tam√©n
existen outras como "Money manager & expenses" ou "Money Tracker-Expense & Budget". Moitas aplicaci√≥ns que limitan as funcionalidades b√°sicas a versi√≥ns "pro" ou implementan publicidade que empeora a experiencia de
usuario ou como no caso das que nos suele inclu√≠r o banco, non nos permite cambiar categor√≠as ou inclu√≠r outras contas etc

3.  Persoas destinatarias

O p√∫blico obxectivo desta aplicaci√≥n son todas as persoas f√≠sicas, que poidan dispor de un m√≥bil e te√±an co√±ecementos b√°sicos de como utilizalo. Xa que √© unha aplicaci√≥n moi intuitiva e sinxela. A idade
de uso vai dende os m√°is novos ata persoas maiores ou xubilados, xa que administrar o noso di√±eiro √© algo que dunha forma ou doutra faremos ao longo de toda a nosa vida.

4.  Modelo de negocio

O modelo de negocio √© "freemium" donde a aplicaci√≥n gratu√≠ta incl√∫e todas as funcionalidades b√°sicas e m√°is usadas. E a versi√≥n Premium ser√° utilizada para poder desfrutar das √∫ltimas novidades antes de tempo, acceso a un hist√≥rico de movementos ilimitado e m√°is opci√≥ns como mostrar estat√≠sticas e gr√°ficos dos gastos e ingresos.

5.  Funcionalidades do proxecto (obxectivos e alcance)

A aplicaci√≥n ten as seguintes funcionalidades:

- Permite visualizar o balance de ingresos e gastos.

Mostra o balance entre ingresos e gastos do mes actual

- Crear categor√≠as.

Permite crear categor√≠as personalidadas. Estas categor√≠as son necesarias a hora de engadir un gasto ou ingreso. Cando engadamos un novo gasto ou ingreso deberemos asignalo a unha categor√≠a.

- Engadir gastos e ingresos

Podemos engadir un gasto ou un ingreso a trav√©s dos seus respectivos formularios.

- Visualizar movementos

Podemos visualizar o hist√≥rico de movementos. Visualizando o d√≠a e hora do movemento, se foi ingreso ou gasto, a s√∫a categor√≠a as√≠ como o importe, e podemos filtrar por mes e ano, estos apareceren dispo√±ibles en funci√≥n dos anos nos que te√±√°mos alg√∫n movemento e dentro dese ano os meses donde te√±amos movementos.

- Desprazamento a trav√©s de un men√∫ inferior que nos permitir√° movernos a trav√©s das pantallas.

Un BottomBar que nos permitir√° movernos entre as distintas pantallas. Todas as pantallas permiten navegar a calquera pantalla a excepci√≥n da pantalla de ingresos e gastos, s√≥ navegable a trav√©s da pantalla principal.

<span style="color: red;"> - Configuraci√≥n de l√≠mite de gasto mensual por categor√≠a.</span>

Poderemos configurar un l√≠mite de gasto para cada categor√≠a que
queiramos, para as√≠ que nos notifique cando nos esteamos acercando a ese
l√≠mite.

<span style="color: red;"> - Engadir gastos ou ingresos recurrentes</span>

Teremos a posibilidade de configurar gastos recurrentes que se nos far√°n
autom√°ticamente, e da mesma forma poderemos configurar ingresos tam√©n
recurrentes, como por exemplo a nosa n√≥mina ou ingresos por un alquiler
dunha vivenda etc.

<span style="color: red;"> - Visualizar os movementos recurrentes</span>

Pantalla donde poderemos consultar os movementos recurrentes tanto
ingresos como gastos que te√±amos configurados


#### Funcionalidades adicionales

- A aplicaci√≥n disp√≥n dunha verificaci√≥n biom√©trica de por c√≥digo

Permitir√° acceder a aplicaci√≥n utilizando a verificaci√≥n biom√©trica do dispositivo,
ou ben o patr√≥n/pin de desbloqueo. Incl√∫ese o patr√≥n de desbloqueo como forma de autenticaci√≥n
xa que a aplicaci√≥n est√° pensada para todos os p√∫blicos, e moitas persoas maiores seguen tendo 
dispositivos antigos que carecen de desbloqueo biom√©trico como desbloqueo por huella ou desbloqueo facial.

<span style="color: red;">- Exportado / Importado de Datos</span>

Permite exportar os datos da BBDD para o seu posterior importado noutro dispositivo m√≥bil. Esto permitenos migrar os datos dun dispositivo a outro.


# Recursos

-   Como relaci√≥n √°s necesidades econ√≥micas e de recursos necesarios para o desenvolvemento do proxecto:
    -   Dispositivo m√≥vil necesario para probas reais: Samsung Galaxy A54 5G -> 300‚Ç¨
    -   Equipo de sobremesa con rendemento √≥ptimo para desenvolvemento fluido -> 1000‚Ç¨
    -   Software utilizado:
        -   Android Studio (Gratuito)
        -   Drawio (Gratuito)
        -   Figma (Gratuito)   

__Orzamento:__ 1300‚Ç¨

O proxecto est√° desenvolto utilizando Android Studio, xa que √© o IDE desenvolto por Google m√°is recomendado para crear aplicaci√≥ns Android.

Como linguaxe de programaci√≥n utilizouse Kotlin, que √© a linguaxe que Google recomenda para a creaci√≥n de aplicaci√≥ns Android dende 2017.

A aplicaci√≥n foi programada usando Jetpack Compose, un kit de ferramentas que Google recomenda usar dende 2021 para crear interfaces modernas e de unha forma m√°is f√°cil, r√°pida e sen usar XML.

A BBDD utilizada SQLite, est√° implementada na aplicaci√≥n usando ROOM, unha librer√≠a de persistencia de datos recomendada dende 2017.
M√°is segura, con menos c√≥digo repetitivo. Crearase de forma local no propio dispositivo, pero creada desta forma ser√° moi f√°cil migrala a plataformas como Supabase ou a un servidor de BBDD propio.

#### Funcionalidades adicionales

- Implementouse FLOW, unha librer√≠a que permite manexar datos as√≠ncronos de forma reactiva. Esto permitenos interactuar coa BBDD de forma reactiva e permite a UI recompo√±erse autom√°ticamente. Por exemplo cando engadimos un gasto, autom√°ticamente a pantalla do hist√≥rico ser√° actualizada e mostrar√° ese gasto, e o balance de ingresos e gastos da pantalla principal ser√° actualizado sen a necesidade de facer nada m√°is.

# An√°lise de requirimentos do sistema

1.  Funcionalidades

| **ACCI√ìN**                             | **DESCRICI√ìN**                                                                                                   |
|:---------------------------------------|:------------------------------------------------------------------------------------------------------------------|
| **Alta gasto**                         | Engade un novo gasto na base de datos                                                                           |
| **Alta ingreso**                       | Engade un novo ingreso na base de datos                                                                         |
| **Alta gasto/ingreso recorrente**      | Crea un novo gasto/ingreso peri√≥dico que se rexistrar√° automaticamente como un gasto ou ingreso segundo corresponda |
| **Consulta balance mensual**           | Amosar un resumo do balance entre ingresos e gastos                                                              |
| **Consulta historial**                 | Visualiza o rexistro de gastos e ingresos doutros meses ou anos anteriores filtrando por anos e meses con movementos dispo√±ibles                                     |
| **Consultar movementos recorrentes**   | Amosar a lista completa de movementos recorrentes activos e a cantidade correspondente a cada un                 |
| **Exportado de Datos**                 | Permitir√° exportar os datos da BBDD                                                                              |
| **Importado de Datos**                 | Permitir√° importar os datos inclu√≠ndo un ficheiro coa BBDD                                                       |
| **Creaci√≥n de categor√≠as**             | Permite crear categor√≠as personalizadas
| **Autenticaci√≥n biom√©trica**           | Permite acceder a aplicaci√≥n autenticandose con desbloqueo biom√©trico ou patr√≥n/pin de desbloqueo
| **Splash Screen**                      | Unha pantalla configurada con n deelay que nos permitir√° facer os c√°lculos de base de datos antes de iniciar a aplicaci√≥n dando sensaci√≥n de fluidez

1.  Normativa

üîπ Aviso legal

A aplicaci√≥n SpendWise √© unha ferramenta desenvolvida con fins educativos e persoais para a xesti√≥n de gastos e ingresos.

Non recolle datos persoais identificativos (como nome, correo electr√≥nico ou n√∫mero de tel√©fono), xa que toda a informaci√≥n introducida polo usuario almac√©nase localmente no dispositivo mediante a base de datos SQLite/Room e non se comparte con terceiros nin se transmite a servidores externos.

O responsable do tratamento dos datos √© o desenvolvedor da aplicaci√≥n, quen garante que a informaci√≥n persoal dos usuarios se empregar√° unicamente co prop√≥sito de permitir o correcto funcionamento da aplicaci√≥n e ofrecer as funcionalidades previstas.

üîπ Pol√≠tica de privacidade

Finalidade do tratamento:\
Os datos introducidos polo usuario (rexistros de gastos, ingresos e subscrici√≥ns) util√≠zanse exclusivamente para o c√°lculo de balances, estat√≠sticas e historial de transacci√≥ns dentro da propia aplicaci√≥n.

Base lex√≠tima:\
O tratamento real√≠zase co consentimento expreso do usuario, que √© quen decide introducir e conservar a informaci√≥n no seu dispositivo.

Dereitos do usuario:\
O usuario pode, en calquera momento:

- Modificar ou eliminar os seus rexistros financeiros.

- Desinstalar a aplicaci√≥n, o que implica a eliminaci√≥n total dos datos almacenados localmente.

Medidas de seguridade:

- A informaci√≥n almac√©nase unicamente na base de datos local do dispositivo (sen conexi√≥n a internet).

- Non se realiza transferencia de datos a servidores externos nin a terceiros.

- Empreganse mecanismos de seguridade do sistema operativo Android para protexer o acceso √° informaci√≥n (seguridade biom√©trica).

üîπ Pol√≠tica de cookies

A aplicaci√≥n non utiliza cookies nin tecnolox√≠as de seguimento web, xa que funciona de forma local e independente da rede.

# Dese√±o

1.  Dese√±o da arquitectura do sistema

A aplicaci√≥n SpendWise est√° baseada nunha arquitectura en capas, seguindo o patr√≥n MVVM (Model-View-ViewModel) recomendada por Android para proxectos con Jetpack Compose.

Esta estrutura permite unha separaci√≥n clara e facilita o mantemento, as probas e a escalabilidade do proxecto.

Dese√±o:

Interface do Usuario UI: Implementada con Jetpack Compose. Cont√©n as pantallas, compo√±entes visuais e interacci√≥ns do usuario.

ViewModel: Act√∫a como intermediario entre a UI e os datos. Cont√©n a l√≥xica e xestiona o estado da interface accedendo aos datos.

Repositorio: Encargase de proporcionar os datos √° ViewModel. Xestiona o acceso √° base de datos local mediante DAO de Room.

Base de datos (Room / SQLite / FLOW): Almacena de forma persistente e reactiva os rexistros de gastos, ingresos e subscrici√≥ns no dispositivo. Non se emprega ningunha conexi√≥n √° nube.

Modelo datos: Define a informaci√≥n que se gardan na base de datos e se utilizan en toda a aplicaci√≥n.

![Arquitectura](img/Arquitectura.png)

2.  Dese√±o da persistencia de datos

![Persistencia de datos](img/Persistencia_Datos.png)

![Diagrama Entidad Relaci√≥n](img/Entidad_Relacion.png)

3.  Dese√±o da interface de usuario

Main Screen: √â a pantalla principal que nos mostrar√° o balance de ingresos/gastos e nos permite engadir ingresos ou gastos

![Main Screen](img/Main_Screen.png)

Income Screen: Pantalla de ingresos, sirve para crear un novo ingreso

![Income Screen](img/Income_Screen.png)

Expense Screen: Pantalla de gastos, sirve para crear un novo gasto

![Expense Screen](img/Expense_Screen.png)

Log Screen: Pantalla destinada a mostrar o historial de gastos, inclu√≠dos os gastos recurrentes

![Log Screen](img/Log_Screen.png)

Recurrin Screen: Pantalla destinada a crear os gastos recurrentes

![Recurrin Screen](img/Recurrin_Screen.png)

Recurrin History: Pantalla destinada a ver os movementos recurrentes que temos configurados actualmente, tanto ingresos como gastos

![Recurrin History Screen](img/Recurrin_History_Screen.png)

Data Screen: Pantalla destinada ao importado e exportado de datos

![Data Screen](img/Data_Screen.png)

Category Screen: Pantalla destinada a crear, editar e eliminar categor√≠as

![Category Screen](img/Category_Screen.png)

1. Navegaci√≥n de vistas:

Disponse de un bottom men√∫ para a navegaci√≥n entre as pantallas principales.

![Navigation](img/Navigation.png)


### Problemas atopados

- Necesidade de un m√©todo de autenticaci√≥n ou verificaci√≥n para autenticar o usuario e que solo o usuario te√±a acceso. Para solucionar esto implementase unha verificaci√≥n biom√©trica

- Necesidade de un men√∫ de navegaci√≥n. Ti√±a un problema que sempre ti√±a que pintar a BottomBar en todas as pantallas. Para solucionar esto creeina como unha screen m√°is e implementeina na navegaci√≥n. As√≠ podo xestionar en que pantallas quero que se visualice e en cales no. E ao xestionar a navegaci√≥n de vistas a trav√©s de AppNavigation te√±o moito m√°is control das navegaci√≥ns

- Necesidade actualizaci√≥n constante de variables como o balance de ingresos e gastos. Cando a√±ad√≠a os gastos gardabase na base de datos pero para actualizalos ti√±a que salir e volver a entrar. Para solucionar esto implementei FLOW que permite facer actualizaci√≥ns autom√°ticas cada vez que insertas ou moficas na base de datos. Unha vez a√±ado un gasto este actualiza o balance global e tam√©n o history etc.

- Na pantalla de HistoryScreen donde se almacena o hist√≥rico de movementos, nun inicio ti√±a pensado ubicar a categor√≠a na parte central entre o importe e a descrici√≥n pero esto provocoume moitos problemas cando a cantidade era moi grande ou a descrici√≥n moi larga, polo que decidin ubicar a categor√≠a debaixo da data do movemento as√≠ hai m√°is espazo tanto para a cantidade como para a descrici√≥n.

- Con respecto ao tama√±o do importe no hist√≥rico de movementos decidin que cando pase de x cifras cambie o tama√±o da fonte para facelo m√°is pequeno as√≠ non se come toda a pantalla cando son cifras altas.
- En relaci√≥n a descrici√≥n no hist√≥rico de movementos ti√±a o problema que cando era moi largo perd√≠a lexibilidade e igual que a cantidade com√≠ase moita pantalla polo que implmentei que cando pase de n caracteres meta un intro e separe en m√°is lineas.

- Cando creo un movemento recurrente para poder ter tanto gastos como ingresos recurrentes non te√±o unha maneibra de indicar que vai ser un gasto ou un ingreso.

- No movemento recurrente ti√±a almacenada as datas como Long, pero dificult√°bame moito manexalas e operar con elas, polo que as cambio a String para utilizar os m√©todos com√∫ns de date

- Chamaba ao m√©todo de creaci√≥n de movementos recurrentes no Main Activity, pero esto daba erros xa que cando a app estaba cerrada non se chamaban aos m√©todos, polo que se implementa unha clase Aplication. Forma de  facelo que recomenta Google: https://developer.android.com/topic/libraries/architecture/workmanager#schedule_from_application